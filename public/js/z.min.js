var audio=new Audio();if(BrowserDetect.browser=="MSIE"&&BrowserDetect.version>=9||BrowserDetect.browser=="Safari"){audio.src="/audio/notify.mp3"}else{audio.src="/audio/notify.ogg"}var content=Array();var content_paused=Array();var cutoff=100;var dms_loaded=0;var dm_to=false;var following=Array();var geolocation_timeout=12000;var ids=Array();var latit=false;var longit=false;var max_fps=40;var paused=false;var pttid=0;var prune_tweets_interval=60000;var reply_id=false;var screen_name="";var socket=new io.SessionSocket();var tid=0;var ttid=0;var update_relative_dms_interval=60000;var update_relative_home_interval=15000;var update_relative_mentions_interval=30000;var user_id=0;new S2.FX.Base({fps:max_fps});function z_engine_attrition(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(z_engine_get_geolocation,z_engine_geolocation_error,{enableHighAccuracy:false,maximumAge:0,timeout:geolocation_timeout})}$("loading-home").center(8);$("loading-mentions").center(8);$("loading-inbox").center(8);$("loading-outbox").center(8);new Event.observe("clear","click",function(a){Event.stop(a);return z_engine_tweet_clear()});new Event.observe("pause","click",function(a){Event.stop(a);return z_engine_tweet_pause()});new Event.observe("new-tweet","keyup",function(a){if($("new-tweet").getValue().length===0){dm_to=false;reply_id=false}else{if($("new-tweet").getValue().length<=140){$("new-tweet").setStyle("color: #4d4d4d;")}else{if($("new-tweet").getValue().length>=141){$("new-tweet").setStyle("color: red;")}}}});new Event.observe("new-tweet","keydown",function(a){if($("new-tweet").getValue().length===0){reply_id=false}else{if($("new-tweet").getValue().length<=140){$("new-tweet").setStyle("color: #4d4d4d;")}else{if($("new-tweet").getValue().length>=141){$("new-tweet").setStyle("color: red;")}}}});socket.connect();socket.on("connect",function(){$("new-tweet").setValue("connected...")});socket.on("message",function(m){var g=JSON.stringify(m);if(g.isJSON()&&g.evalJSON(true)){g="";if(m.loaded){$("new-tweet").setValue("");$("new-tweet").enable();new Event.observe("new-tweet-form","submit",function(n){Event.stop(n);z_engine_send_tweet()});z_engine_clicker("home-timeline-click","home-timeline");z_engine_clicker("mentions-timeline-click","mentions-timeline");z_engine_clicker("dms-timeline-click","dms-timeline");z_engine_dms_clicker("dms-inbox-timeline-click","dms-inbox-timeline");z_engine_dms_clicker("dms-outbox-timeline-click","dms-outbox-timeline");socket.send({fetch:"home"});var k=window.setTimeout(function(){socket.send({fetch:"mentions"})},10000);var h=window.setTimeout(function(){socket.send({fetch:"dms-inbox"})},20000);var c=window.setTimeout(function(){socket.send({fetch:"dms-outbox"})},30000);var j=window.setInterval(function(){this.z_engine_update_relative_time("time.home")},update_relative_home_interval);var f=window.setInterval(function(){this.z_engine_update_relative_time("time.mentions")},update_relative_mentions_interval);var l=window.setInterval(function(){this.z_engine_update_relative_time("time.dms")},update_relative_dms_interval);var e=window.setInterval(function(){this.z_engine_prune_tweets()},prune_tweets_interval)}else{if(m["delete"]){if(typeof(m["delete"].status)=="object"){var b=m["delete"].status.id_str}else{if(typeof(m["delete"].direct_message)=="object"){var b=m["delete"].direct_message.id}else{var b=0}}if($("comment-"+b)){$("comment-"+b).setStyle("text-decoration: line-through;");if($("del-"+b)){$("del-"+b).fade()}if($("fave-"+b)){$("fave-"+b).fade()}if($("reply-"+b)){$("reply-"+b).fade()}if($("rt-"+b)){$("rt-"+b).fade()}window.setTimeout(function(){new S2.FX.Parallel([new Effect.BlindUp("comment-"+b,{duration:1.25,mode:"relative"}),new Effect.Fade("comment-"+b,{duration:1,mode:"relative"}),],{duration:1.25,})},3000)}if($("comment-"+b+"-mentioned")){if($("del-"+b+"-mentioned")){$("del-"+b+"-mentioned").fade()}if($("fave-"+b+"-mentioned")){$("fave-"+b+"-mentioned").fade()}if($("reply-"+b+"-mentioned")){$("reply-"+b+"-mentioned").fade()}if($("rt-"+b+"-mentioned")){$("rt-"+b+"-mentioned").fade()}window.setTimeout(function(){new S2.FX.Parallel([new Effect.BlindUp("comment-"+b+"-mentioned",{duration:1.25,mode:"relative"}),new Effect.Fade("comment-"+b+"-mentioned",{duration:1,mode:"relative"}),],{duration:1.25})},3000)}}else{if(m.direct_message){z_engine_tweet(m.direct_message,"dms");if(m.direct_message.sender.screen_name!=screen_name){z_engine_notification(m.direct_message.sender.profile_image_url,"@"+m.direct_message.sender.screen_name+" sent a direct message",m.direct_message.text)}}else{if(m.dms){dms_loaded++;m.dms.each(function(n){z_engine_tweet(n,"dms")});switch(dms_loaded){case 1:$("loading-inbox").fade();break;case 2:$("loading-outbox").fade();break}}else{if(m.event){var a=m.event;switch(a){case"block":break;case"unblock":break;case"favorite":if(m.source.screen_name!=screen_name){z_engine_notification(m.source.profile_image_url,"@"+m.source.screen_name+" faved your tweet!",m.target_object.text)}break;case"unfavorite":break;case"follow":if(m.source.screen_name!=screen_name){z_engine_notification(m.source.profile_image_url,"@"+m.source.screen_name+" started following you!",m.source.description)}break;case"list_member_added":if(m.source.screen_name!=screen_name){z_engine_notification(m.source.profile_image_url,"@"+m.source.screen_name+" put you in "+m.target_object.full_name+"!",m.target_object.description)}break;case"list_created":break;case"list_destroyed":break;case"list_member_removed":if(m.source.screen_name!=screen_name){z_engine_notification(m.source.profile_image_url,"@"+m.source.screen_name+" removed you from "+m.target_object.full_name+"!",m.target_object.description)}break;case"list_updated":break;case"list_user_subscribed":if(m.source.screen_name!=screen_name){z_engine_notification(m.source.profile_image_url,"@"+m.source.screen_name+" subscribed to "+m.target_object.full_name+"!",m.target_object.description)}break;case"list_user_unsubscribed":break;case"scrub_geo":break;case"user_update":break;default:console.log(JSON.stringify(m.event));console.log(JSON.stringify(m));break}}else{if(m.friends){following=JSON.stringify(m.friends);Cookie.init({name:"friends",expires:365});Cookie.setData(JSON.stringify(m.friends),false)}else{if(m.info){screen_name=m.info.screen_name;user_id=m.info.user_id;Cookie.init({name:"info",expires:365});Cookie.setData(JSON.stringify(m.info),false)}else{if(m.home){m.home.each(function(n){z_engine_tweet(n,"home")});socket.send({fetch:"userstream"});$("loading-home").fade()}else{if(m.mentions){m.mentions.each(function(n){z_engine_tweet(n,"mentions")});$("loading-mentions").fade()}else{if(m.retweet_info){var d=m.retweet_info;if($("comment-"+d.retweeted_status.id_str)){if($("rt-"+d.retweeted_status.id_str)){$("rt-"+d.retweeted_status.id_str).writeAttribute("src","img/rtd.png");$("rt-"+d.retweeted_status.id_str).writeAttribute("onclick","z_engine_destroy('"+d.retweeted_status.id_str+"','rt');")}if($("rt-"+d.retweeted_status.id_str+"-mentioned")){$("rt-"+d.retweeted_status.id_str+"-mentioned").writeAttribute("src","img/rtd.png");$("rt-"+d.retweeted_status.id_str+"-mentioned").writeAttribute("onclick","z_engine_destroy('"+d.retweeted_status.id_str+"','rt');")}}}else{if(m.server_event){console.log(JSON.stringify(m));switch(m.server_event){case"end":z_engine_notification("","notice!","lost connection to the userstream, reconnecting...");break;case"error":break}}else{if(m.text&&m.user&&m.created_at){if(typeof(m.retweeted_status)=="object"&&m.retweeted_status.user.screen_name==screen_name&&m.user.screen_name!=screen_name){z_engine_notification(m.user.profile_image_url,"@"+m.user.screen_name+" retweeted you!",m.retweeted_status.text)}else{if(!paused){z_engine_tweet(m,"home")}else{z_engine_tweet_pause_handler(m)}}}}}}}}}}}}}}}else{if(!g.isJSON()){console.log("not json, skipping")}else{if(!g.evalJSON(true)){console.log("json could not be properly evaluated, skipping")}else{console.log("unknown error, output: "+g)}}}});socket.on("disconnect",function(){$("new-tweet").disable();$("new-tweet").setValue("lost connection!");z_engine_notification("","error!","lost connection to server")})}function z_engine_clicker(b,a){new Event.observe(b,"click",function(d){Event.stop(d);if(a=="dms-timeline"){new S2.FX.Parallel([new Effect.Fade("dms-timeline-click",{duration:0.25,mode:"relative"}),new Effect.Appear("dms-inbox-timeline-click",{delay:0.1,duration:0.25,mode:"relative"}),new Effect.Appear("dms-outbox-timeline-click",{delay:0.1,duration:0.25,mode:"relative"})],{duration:1})}else{if($("dms-inbox-timeline-click").visible()||$("dms-outbox-timeline-click").visible()){new S2.FX.Parallel([new Effect.Fade("dms-outbox-timeline-click",{duration:0.15,mode:"relative"}),new Effect.Fade("dms-inbox-timeline-click",{duration:0.15,mode:"relative"}),new Effect.Appear("dms-timeline-click",{delay:0.15,duration:0.25,mode:"relative"})],{duration:1})}}if(!$(a).visible()){if($("home-timeline").visible()){var c="home-timeline"}else{if($("mentions-timeline").visible()){var c="mentions-timeline"}else{if($("dms-timeline").visible()){var c="dms-timeline"}}}new S2.FX.Parallel([new Effect.Fade(c,{duration:0.4,mode:"relative"}),new Effect.Appear(a,{delay:0.35,duration:0.4,mode:"relative"})],{duration:1})}})}function z_engine_dms_clicker(b,a){new Event.observe(b,"click",function(d){Event.stop(d);if(!$(a).visible()){if($("dms-outbox-timeline").visible()){var c="dms-outbox-timeline"}else{if($("dms-inbox-timeline").visible()){var c="dms-inbox-timeline"}}new S2.FX.Parallel([new Effect.Fade(c,{duration:0.4,mode:"relative"}),new Effect.Appear(a,{delay:0.35,duration:0.4,mode:"relative"})],{duration:1})}})}function z_engine_destroy(d,c){var b=confirm("\nare you sure you want to delete this?\n");if(b){if(c=="tweet"||c=="rt"){var a={destroy:{status:{id_str:d}}}}else{if(c=="dm"){var a={destroy_dm:{status:{id_str:d}}}}}if(c=="rt"){if($("rt-"+d)){$("rt-"+d).setAttribute("src","img/rt.png");$("rt-"+d).setAttribute("onclick","z_engine_retweet('"+d+"');")}if($("rt-"+d+"-mentioned")){$("rt-"+d+"-mentioned").setAttribute("src","img/rt.png");$("rt-"+d+"-mentioned").setAttribute("onclick","z_engine_retweet('"+d+"');")}}socket.send(a)}}function z_engine_favorite(a){socket.send({favorite:{status:{id_str:a}}});if($("fave-"+a)){$("fave-"+a).writeAttribute("src","img/favd.png");$("fave-"+a).writeAttribute("onclick","z_engine_unfavorite('"+a+"');")}if($("fave-"+a+"-mentioned")){$("fave-"+a+"-mentioned").writeAttribute("src","img/favd.png");$("fave-"+a+"-mentioned").writeAttribute("onclick","z_engine_unfavorite('"+a+"');")}}function z_engine_get_geolocation(a){latit=a.coords.latitude;longit=a.coords.longitude}function z_engine_geolocation_error(a){switch(a.code){case 0:case 1:case 2:case 3:latit=false;longit=false;break}}function z_engine_notification(c,a,b){if(BrowserDetect.browser=="MSIE"&&BrowserDetect.version>=9||BrowserDetect.browser!="MSIE"){audio.play()}growler.growl(z_engine_parse_tweet(a),z_engine_parse_tweet(b))}function z_engine_parse_tweet(a){if(!a){return a}else{a=twttr.txt.autoLink(a,{hashtagUrlBase:"https://search.twitter.com/search?q=%23"});a=a.replace(/\n\r?/g,"<br />");return a}}function z_engine_prune_tweets(){var a=$("home-timeline").childElements();if(a.length>0){for(i=0;i<a.length;i++){if(i>cutoff){$(a[i]).remove()}}}window.setTimeout(function(){var b=$("mentions-timeline").childElements();if(b.length>0){for(i=0;i<b.length;i++){if(i>cutoff){$(b[i]).remove()}}}},10000);window.setTimeout(function(){var b=$("dms-inbox-timeline").childElements();if(b.length>0){for(i=0;i<b.length;i++){if(i>cutoff){$(b[i]).remove()}}}},20000);window.setTimeout(function(){var b=$("dms-outbox-timeline").childElements();if(b.length>0){for(i=0;i<b.length;i++){if(i>cutoff){$(b[i]).remove()}}}},30000)}function z_engine_reply(e,b,d){reply_id=e;var a="@"+b+" ";if(d){var c=d;c.each(function(f){a+="@"+f.screen_name+" "})}$("new-tweet").setValue(a);$("new-tweet").focus()}function z_engine_reply_dm(a){dm_to=a;$("new-tweet").setValue("~");$("new-tweet").focus()}function z_engine_retweet(e,c,d){var b=confirm("\nare you sure you want to retweet this?\n");if(b){var a=confirm("ok for normal retweet\ncancel for commented retweet");if(a){socket.send({retweet:{status:{id_str:e}}})}else{$("new-tweet").setValue("RT "+c+": "+d)}}}function z_engine_send_tweet(){if($("new-tweet").getValue().length>0&&$("new-tweet").getValue().length<=140){$("new-tweet").disable();var a=$("new-tweet").getValue();if(!reply_id&&!dm_to){if(!latit&&!longit){var b={status:{status:a,include_entities:true}}}else{var b={status:{status:a,include_entities:true,display_coordinates:true,lat:latit,"long":longit}}}}else{if(reply_id!=false){if(!latit&&!longit){var b={status:{status:a,in_reply_to_status_id:reply_id,include_entities:true}}}else{var b={status:{status:a,in_reply_to_status_id:reply_id,include_entities:true,display_coordinates:true,lat:latit,"long":longit}}}}else{if(dm_to!=false){a=a.replace(/~/,"");var b={direct_message:{text:a,user_id:dm_to}}}}}socket.send(b);reply_id=false;dm_to=false;$("new-tweet").setValue("");$("new-tweet").enable()}}function z_engine_tweet(X,E){if(E!="dms"){if(!X.retweeted_status){var j=X.user.screen_name;var Z=false;var r=X.user.profile_image_url;var n=false;var W=new Date(X.created_at).toLocaleString().replace(/GMT.+/,"");var L=X.entities;var l=X.favorited;var N=X.id_str;var J=X.user["protected"];var q=X.user.name;var c=X.place;var Q=X.in_reply_to_screen_name;var P=X.in_reply_to_status_id_str;var V=false;var B=X.source;var G=X.text;var S=X.user.id;var s=X.user.verified}else{var j=X.retweeted_status.user.screen_name;var Z=X.user.screen_name;var r=X.retweeted_status.user.profile_image_url;var n=X.user.profile_image_url;var W=new Date(X.retweeted_status.created_at).toLocaleString().replace(/GMT.+/,"");var L=X.retweeted_status.entities;var l=X.retweeted_status.favorited;var N=X.retweeted_status.id_str;var J=X.retweeted_status.user["protected"];var q=X.retweeted_status.user.name;var c=X.retweeted_status.place;var Q=X.retweeted_status.in_reply_to_screen_name;var P=X.retweeted_status.in_reply_to_status_id_str;var V=true;var B=X.retweeted_status.source;var G=X.retweeted_status.text;var S=X.retweeted_status.user.id;var s=X.retweeted_status.user.verified}}else{var j=X.sender.screen_name;var r=X.sender.profile_image_url;var W=new Date(X.created_at).toLocaleString().replace(/GMT.+/,"");var L=false;var N=X.id_str;var J=X.sender["protected"];var q=X.sender.name;var Q=X.in_reply_to_screen_name;var V=false;var G=X.text;var S=X.sender_id;var s=X.sender.verified}if(!content[N]){if(E!="mentions"){ids[tid]=N;content[N]=true}var f=new Element("br");if(!L){var I=false}else{var I=z_engine_tweet_mentioned(L)}var C=new Element("li",{id:"comment-"+N,"class":"comment-parent",style:"display:none;opacity:0;"});var o=new Element("div",{"class":"comment-profile-wrapper left"});var D=new Element("div",{"class":"comment-gravatar"});var b=new Element("a",{target:"_blank",href:"http://twitter.com/"+j});var R=new Element("img",{src:r,style:"height:50px;width:50px",alt:""});b.insert(R);D.insert(b);o.insert(D);var m=new Element("div",{id:"comment-"+N+"content","class":"comment-content-wrapper right"});if(j!=screen_name){if(!I){var F=new Element("div",{"class":"comment-body"})}else{var F=new Element("div",{"class":"comment-body-mentioned"})}}else{var F=new Element("div",{"class":"comment-body-me"})}var aa=new Element("div",{"class":"comment-arrow"});F.insert(aa);var u=new Element("div",{"class":"post-date"});var K=new Element("div",{"class":"left"});var z=new Element("a",{target:"_blank",href:"http://twitter.com/"+j});z.update("@"+j+" ");var p=new Element("span");p.update("wrote this ");if(E!="dms"){var v=new Element("a",{target:"_blank",id:"comment-"+N+"-relative-date",href:"http://twitter.com/"+j+"/status/"+N})}var T=new Element("time",{datetime:W,"class":E});T.update(relative_time(W));if(E!="dms"){v.insert(T)}K.insert(z);K.insert({bottom:p});if(E!="dms"){K.insert({bottom:v});if(P){var g=new Element("span");g.update(" in reply to ");var e=new Element("a",{target:"_blank",href:"http://twitter.com/"+Q+"/status/"+P});e.update(Q+" ");K.insert(g);K.insert({bottom:e})}var H=new Element("span");H.update(" via "+B);K.insert({bottom:H})}else{K.insert({bottom:T})}if(s){var a=new Element("span");var d=new Element("img",{src:"img/ver.png",alt:""});a.update(" "+d);K.insert({bottom:a})}u.insert(K);var h=new Element("div",{"class":"right"});if(V){var k=new Element("span");k.update('RT\'d by <a target="_blank" href="http://twitter.com/'+Z+'">'+Z+"</a> ");h.insert(k)}if(E!="dms"&&c&&c.full_name){var x=new Element("span");var y=new Element("a",{target:"_blank",href:"http://maps.google.com?q="+c.full_name});var M=new Element("img",{src:"img/plc.png",alt:""});y.update(M);x.update(y);h.insert({bottom:x})}u.insert({bottom:h});F.insert({bottom:u});var A=new Element("div",{"class":"clearer"});A.update("&nbsp;");F.insert({bottom:A});var U=new Element("div",{"class":"comment-text"});var Y=new Element("p",{id:"comment-"+N+"-text"});var O=new Element("div",{id:"right-"+N,"class":"right"});Y.insert(f);Y.insert({bottom:O});var w=new Element("div",{id:"text-"+N});w.update(z_engine_parse_tweet(G));Y.insert({bottom:w});U.insert(Y);F.insert({bottom:U});m.insert(F);C.insert(o);C.insert({bottom:m});C.insert({bottom:A});new Element.extend(O);new Element.extend(C);switch(E){case"dms":if(j!=screen_name){$("dms-inbox-timeline").insert({top:C})}else{if(j==screen_name){$("dms-outbox-timeline").insert({top:C})}}break;case"mentions":$("mentions-timeline").insert({bottom:C});break;case"home":$("home-timeline").insert({top:C});break}if(I&&E!="mentions"&&j!=screen_name){var t=cloneNodeWithEvents(C);t.setAttribute("id","comment-"+N+"-mentioned");O.setAttribute("id","right-"+N+"-mentioned");z_engine_tweet_buttons("mentions",N,j,S,G,J,l);new Element.extend(t);$("mentions-timeline").insert({top:t});z_engine_notification(r,"@"+j+" mentioned you!",G);new S2.FX.Parallel([new Effect.Appear("comment-"+N+"-mentioned",{duration:1.25,mode:"relative",transition:"easeOutSine"}),new Effect.BlindDown("comment-"+N+"-mentioned",{duration:0.7,mode:"relative",transition:"easeOutSine"})],{duration:1.5})}z_engine_tweet_buttons(E,N,j,S,G,J,l);new S2.FX.Parallel([new Effect.Appear("comment-"+N,{duration:1.25,mode:"relative",transition:"easeOutSine"}),new Effect.BlindDown("comment-"+N,{duration:0.7,mode:"relative",transition:"easeOutSine"})],{duration:1.5})}if(!I){tid++}}function z_engine_tweet_buttons(j,a,b,c,l,d,m,f){switch(j){case"home":if(b!=screen_name){var e=new Element("img",{src:"img/rep.png",onclick:'z_engine_reply("'+a+'", "'+b+'",'+f+");",id:"reply-"+a,alt:""});if(!d){var k=new Element("img",{src:"img/rt.png",onclick:'z_engine_retweet("'+a+'", "'+b+'", "'+escape_string(l)+'");',id:"rt-"+a,alt:""});new Element.extend(k)}else{var k=new Element("img",{src:"img/lock.png",style:"cursor: default;",alt:""})}if(!m){var g=new Element("img",{src:"img/fav.png",onclick:'z_engine_favorite("'+a+'");',id:"fave-"+a,alt:""})}else{var g=new Element("img",{src:"img/favd.png",onclick:'z_engine_unfavorite("'+a+'");',id:"fave-"+a,alt:""})}new Element.extend(e);new Element.extend(g);$("right-"+a).insert(e);$("right-"+a).insert({bottom:k});$("right-"+a).insert({bottom:g})}else{var h=new Element("img",{onclick:'z_engine_destroy("'+a+'", "tweet");',src:"img/del.png",id:"del-"+a,alt:""});$("right-"+a).insert({bottom:h});new Element.extend(h)}break;case"mentions":if(b!=screen_name){var e=new Element("img",{src:"img/rep.png",onclick:'z_engine_reply("'+a+'", "'+b+'");',id:"reply-"+a+"-mentioned",alt:""});if(!d){var k=new Element("img",{src:"img/rt.png",onclick:'z_engine_retweet("'+a+'", "'+b+'", "'+escape_string(l)+'");',id:"rt-"+a+"-mentioned",alt:""});new Element.extend(k)}else{var k=new Element("img",{src:"img/lock.png",style:"cursor: default;",alt:""})}if(!m){var g=new Element("img",{src:"img/fav.png",onclick:'z_engine_favorite("'+a+'");',id:"fave-"+a+"-mentioned",alt:""})}else{var g=new Element("img",{src:"img/favd.png",onclick:'z_engine_unfavorite("'+a+'");',id:"fave-"+a+"-mentioned",alt:""})}new Element.extend(e);new Element.extend(g);if($("right-"+a)){$("right-"+a).insert(e);$("right-"+a).insert({bottom:k});$("right-"+a).insert({bottom:g})}if($("right-"+a+"-mentioned")){$("right-"+a+"-mentioned").insert(e);$("right-"+a+"-mentioned").insert({bottom:k});$("right-"+a+"-mentioned").insert({bottom:g})}}else{var h=new Element("img",{onclick:'z_engine_destroy("'+a+'", "tweet");',src:"img/del.png",id:"del-"+a+"-mentioned",alt:""});if($("right-"+a)){$("right-"+a).insert({bottom:h})}if($("right-"+a+"-mentioned")){$("right-"+a+"-mentioned").insert({bottom:h})}new Element.extend(h)}break;case"dms":if(b!=screen_name){var e=new Element("img",{onclick:'z_engine_reply_dm("'+c+'");',src:"img/rep.png",id:"reply-"+a,alt:""});new Element.extend(e);$("right-"+a).insert(e)}var h=new Element("img",{onclick:'z_engine_destroy("'+a+'", "dm");',src:"img/del.png",id:"del-"+a,alt:""});new Element.extend(h);$("right-"+a).insert({bottom:h});break}}function z_engine_tweet_clear(){if($("home-timeline").visible()){$("home-timeline").update()}else{if($("mentions-timeline").visible()){$("mentions-timeline").update()}else{if($("dms-inbox-timeline").visible()){$("dms-inbox-timeline").update()}else{if($("dms-outbox-timeline").visible()){$("dms-outbox-timeline").update()}}}}}function z_engine_tweet_mentioned(b){var c=false;if(b.user_mentions.length>0){for(var a=b.user_mentions.length;a--;){if(b.user_mentions[a].screen_name===screen_name){c=true;break}}}return c}function z_engine_tweet_pause(){if(!paused){paused=true;$("pause").update("unpause");new Effect.Appear("paused-count");$("paused-count").morph("opacity: 1;");window.clearTimeout(a)}else{content_paused.each(function(b){if(typeof(b)==="undefined"){}else{if(b.isJSON()){var c=b.evalJSON(true);z_engine_tweet(c,"home")}}});content_paused.clear();paused=false;pttid=0;new Effect.Fade("paused-count",{after:function(){$("pause").update("pause");$("paused-count").update("(0)")}});var a=window.setInterval(function(){this.z_engine_prune_tweets()},prune_tweets_interval)}}function z_engine_tweet_pause_handler(a){content_paused[pttid]=JSON.stringify(a);pttid++;$("paused-count").update("("+pttid+")")}function z_engine_unfavorite(a){socket.send({unfavorite:{status:{id_str:a}}});if($("fave-"+a)){$("fave-"+a).writeAttribute("src","img/fav.png");$("fave-"+a).writeAttribute("onclick","z_engine_favorite('"+a+"');")}if($("fave-"+a+"mentioned")){$("fave-"+a+"-mentioned").writeAttribute("src","img/fav.png");$("fave-"+a+"-mentioned").writeAttribute("onclick","z_engine_favorite('"+a+"');")}}function z_engine_update_relative_time(b){var a=$$(b);a.each(function(c){var d=c.getAttribute("datetime");c.update(relative_time(d))})};